{"ast":null,"code":"var _jsxFileName = \"D:\\\\ZTPAI\\\\frontend\\\\src\\\\components\\\\AddBookModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AddBookModal({\n  closeModal\n}) {\n  _s();\n  const [formData, setFormData] = useState({\n    title: '',\n    author: '',\n    publicationYear: '',\n    genre: '',\n    stock: '',\n    image: null\n  });\n  const [message, setMessage] = useState('');\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const handleChange = e => {\n    if (e.target.type === \"file\") {\n      setFormData({\n        ...formData,\n        [e.target.name]: e.target.files[0]\n      });\n    } else {\n      setFormData({\n        ...formData,\n        [e.target.name]: e.target.value\n      });\n    }\n  };\n  const clearForm = () => {\n    setFormData({\n      title: '',\n      author: '',\n      publicationYear: '',\n      genre: '',\n      stock: '',\n      image: null\n    });\n  };\n  const areFieldsValid = () => {\n    // Ensure all fields are filled and image is selected\n    const requiredFieldsFilled = Object.values(formData).every(value => {\n      return value !== '' && value !== null;\n    });\n    return requiredFieldsFilled && formData.image;\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!areFieldsValid()) {\n      setMessage(\"Proszę o wypełnienie wszystkich pól!\");\n      return;\n    }\n    const formPayload = new FormData();\n    Object.entries(formData).forEach(([key, value]) => {\n      formPayload.append(key, value);\n    });\n    try {\n      const response = await fetch('http://localhost:8000/app/addBook/', {\n        method: 'POST',\n        body: formPayload\n      });\n      const data = await response.json();\n      if (data.status === 'success') {\n        setMessage(`Sukces: ${data.message}`);\n        setIsSubmitted(true);\n        clearForm();\n        closeModal();\n      } else {\n        setMessage(`Błąd: ${data.message}`);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      setMessage(\"Błąd podczas dodawania książki.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"close-button\",\n        onClick: closeModal,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-messageBox\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"title\",\n          placeholder: \"Tytu\\u0142\",\n          value: formData.title,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"author\",\n          placeholder: \"Autor\",\n          value: formData.author,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"publicationYear\",\n          placeholder: \"Rok wydania\",\n          value: formData.publicationYear,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"genre\",\n          placeholder: \"Gatunek\",\n          value: formData.genre,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"stock\",\n          placeholder: \"Liczba dost\\u0119pnych egzemplarzy\",\n          value: formData.stock,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"image\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isSubmitted,\n          children: \"Dodaj\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(AddBookModal, \"99uUz3R5+dRajjHLU7s+g8/tFbk=\");\n_c = AddBookModal;\nexport default AddBookModal;\nvar _c;\n$RefreshReg$(_c, \"AddBookModal\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","AddBookModal","closeModal","_s","formData","setFormData","title","author","publicationYear","genre","stock","image","message","setMessage","isSubmitted","setIsSubmitted","handleChange","e","target","type","name","files","value","clearForm","areFieldsValid","requiredFieldsFilled","Object","values","every","handleSubmit","event","preventDefault","formPayload","FormData","entries","forEach","key","append","response","fetch","method","body","data","json","status","error","console","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","onChange","disabled","_c","$RefreshReg$"],"sources":["D:/ZTPAI/frontend/src/components/AddBookModal.js"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nfunction AddBookModal({ closeModal }) {\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        author: '',\r\n        publicationYear: '',\r\n        genre: '',\r\n        stock: '',\r\n        image: null\r\n    });\r\n    const [message, setMessage] = useState('');\r\n    const [isSubmitted, setIsSubmitted] = useState(false);\r\n\r\n    const handleChange = (e) => {\r\n        if (e.target.type === \"file\") {\r\n            setFormData({ ...formData, [e.target.name]: e.target.files[0] });\r\n        } else {\r\n            setFormData({ ...formData, [e.target.name]: e.target.value });\r\n        }\r\n    };\r\n\r\n    const clearForm = () => {\r\n        setFormData({\r\n            title: '',\r\n            author: '',\r\n            publicationYear: '',\r\n            genre: '',\r\n            stock: '',\r\n            image: null\r\n        });\r\n    };\r\n\r\n    const areFieldsValid = () => {\r\n        // Ensure all fields are filled and image is selected\r\n        const requiredFieldsFilled = Object.values(formData).every(value => {\r\n            return value !== '' && value !== null;\r\n        });\r\n        return requiredFieldsFilled && formData.image;\r\n    };\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        if (!areFieldsValid()) {\r\n            setMessage(\"Proszę o wypełnienie wszystkich pól!\");\r\n            return;\r\n        }\r\n\r\n        const formPayload = new FormData();\r\n        Object.entries(formData).forEach(([key, value]) => {\r\n            formPayload.append(key, value);\r\n        });\r\n\r\n\r\n        \r\n        try {\r\n            const response = await fetch('http://localhost:8000/app/addBook/', {\r\n                method: 'POST',\r\n                body: formPayload\r\n            });\r\n            const data = await response.json();\r\n\r\n            if (data.status === 'success') {\r\n                setMessage(`Sukces: ${data.message}`);\r\n                setIsSubmitted(true);\r\n                clearForm();\r\n                closeModal();\r\n            } else {\r\n                setMessage(`Błąd: ${data.message}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            setMessage(\"Błąd podczas dodawania książki.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"modal\">\r\n            <div className=\"modal-content\">\r\n                <span className=\"close-button\" onClick={closeModal}>&times;</span>\r\n                <div className=\"modal-messageBox\">{message}</div>\r\n                <form onSubmit={handleSubmit}>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"title\"\r\n                        placeholder=\"Tytuł\"\r\n                        value={formData.title}\r\n                        onChange={handleChange}\r\n                    />\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"author\"\r\n                        placeholder=\"Autor\"\r\n                        value={formData.author}\r\n                        onChange={handleChange}\r\n                    />\r\n                    <input\r\n                        type=\"number\"\r\n                        name=\"publicationYear\"\r\n                        placeholder=\"Rok wydania\"\r\n                        value={formData.publicationYear}\r\n                        onChange={handleChange}\r\n                    />\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"genre\"\r\n                        placeholder=\"Gatunek\"\r\n                        value={formData.genre}\r\n                        onChange={handleChange}\r\n                    />\r\n                    <input\r\n                        type=\"number\"\r\n                        name=\"stock\"\r\n                        placeholder=\"Liczba dostępnych egzemplarzy\"\r\n                        value={formData.stock}\r\n                        onChange={handleChange}\r\n                    />\r\n                    <input\r\n                        type=\"file\"\r\n                        name=\"image\"\r\n                        onChange={handleChange}\r\n                    />\r\n                    <button type=\"submit\" disabled={isSubmitted}>Dodaj</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AddBookModal;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,SAASC,YAAYA,CAAC;EAAEC;AAAW,CAAC,EAAE;EAAAC,EAAA;EAClC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC;IACrCQ,KAAK,EAAE,EAAE;IACTC,MAAM,EAAE,EAAE;IACVC,eAAe,EAAE,EAAE;IACnBC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE;EACX,CAAC,CAAC;EACF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACgB,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAMkB,YAAY,GAAIC,CAAC,IAAK;IACxB,IAAIA,CAAC,CAACC,MAAM,CAACC,IAAI,KAAK,MAAM,EAAE;MAC1Bd,WAAW,CAAC;QAAE,GAAGD,QAAQ;QAAE,CAACa,CAAC,CAACC,MAAM,CAACE,IAAI,GAAGH,CAAC,CAACC,MAAM,CAACG,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC;IACpE,CAAC,MAAM;MACHhB,WAAW,CAAC;QAAE,GAAGD,QAAQ;QAAE,CAACa,CAAC,CAACC,MAAM,CAACE,IAAI,GAAGH,CAAC,CAACC,MAAM,CAACI;MAAM,CAAC,CAAC;IACjE;EACJ,CAAC;EAED,MAAMC,SAAS,GAAGA,CAAA,KAAM;IACpBlB,WAAW,CAAC;MACRC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MACVC,eAAe,EAAE,EAAE;MACnBC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE;IACX,CAAC,CAAC;EACN,CAAC;EAED,MAAMa,cAAc,GAAGA,CAAA,KAAM;IACzB;IACA,MAAMC,oBAAoB,GAAGC,MAAM,CAACC,MAAM,CAACvB,QAAQ,CAAC,CAACwB,KAAK,CAACN,KAAK,IAAI;MAChE,OAAOA,KAAK,KAAK,EAAE,IAAIA,KAAK,KAAK,IAAI;IACzC,CAAC,CAAC;IACF,OAAOG,oBAAoB,IAAIrB,QAAQ,CAACO,KAAK;EACjD,CAAC;EAED,MAAMkB,YAAY,GAAG,MAAOC,KAAK,IAAK;IAClCA,KAAK,CAACC,cAAc,CAAC,CAAC;IAEtB,IAAI,CAACP,cAAc,CAAC,CAAC,EAAE;MACnBX,UAAU,CAAC,sCAAsC,CAAC;MAClD;IACJ;IAEA,MAAMmB,WAAW,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAClCP,MAAM,CAACQ,OAAO,CAAC9B,QAAQ,CAAC,CAAC+B,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEd,KAAK,CAAC,KAAK;MAC/CU,WAAW,CAACK,MAAM,CAACD,GAAG,EAAEd,KAAK,CAAC;IAClC,CAAC,CAAC;IAIF,IAAI;MACA,MAAMgB,QAAQ,GAAG,MAAMC,KAAK,CAAC,oCAAoC,EAAE;QAC/DC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAET;MACV,CAAC,CAAC;MACF,MAAMU,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAElC,IAAID,IAAI,CAACE,MAAM,KAAK,SAAS,EAAE;QAC3B/B,UAAU,CAAE,WAAU6B,IAAI,CAAC9B,OAAQ,EAAC,CAAC;QACrCG,cAAc,CAAC,IAAI,CAAC;QACpBQ,SAAS,CAAC,CAAC;QACXrB,UAAU,CAAC,CAAC;MAChB,CAAC,MAAM;QACHW,UAAU,CAAE,SAAQ6B,IAAI,CAAC9B,OAAQ,EAAC,CAAC;MACvC;IACJ,CAAC,CAAC,OAAOiC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;MAC9BhC,UAAU,CAAC,iCAAiC,CAAC;IACjD;EACJ,CAAC;EAED,oBACIb,OAAA;IAAK+C,SAAS,EAAC,OAAO;IAAAC,QAAA,eAClBhD,OAAA;MAAK+C,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC1BhD,OAAA;QAAM+C,SAAS,EAAC,cAAc;QAACE,OAAO,EAAE/C,UAAW;QAAA8C,QAAA,EAAC;MAAO;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAClErD,OAAA;QAAK+C,SAAS,EAAC,kBAAkB;QAAAC,QAAA,EAAEpC;MAAO;QAAAsC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACjDrD,OAAA;QAAMsD,QAAQ,EAAEzB,YAAa;QAAAmB,QAAA,gBACzBhD,OAAA;UACImB,IAAI,EAAC,MAAM;UACXC,IAAI,EAAC,OAAO;UACZmC,WAAW,EAAC,YAAO;UACnBjC,KAAK,EAAElB,QAAQ,CAACE,KAAM;UACtBkD,QAAQ,EAAExC;QAAa;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eACFrD,OAAA;UACImB,IAAI,EAAC,MAAM;UACXC,IAAI,EAAC,QAAQ;UACbmC,WAAW,EAAC,OAAO;UACnBjC,KAAK,EAAElB,QAAQ,CAACG,MAAO;UACvBiD,QAAQ,EAAExC;QAAa;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eACFrD,OAAA;UACImB,IAAI,EAAC,QAAQ;UACbC,IAAI,EAAC,iBAAiB;UACtBmC,WAAW,EAAC,aAAa;UACzBjC,KAAK,EAAElB,QAAQ,CAACI,eAAgB;UAChCgD,QAAQ,EAAExC;QAAa;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eACFrD,OAAA;UACImB,IAAI,EAAC,MAAM;UACXC,IAAI,EAAC,OAAO;UACZmC,WAAW,EAAC,SAAS;UACrBjC,KAAK,EAAElB,QAAQ,CAACK,KAAM;UACtB+C,QAAQ,EAAExC;QAAa;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eACFrD,OAAA;UACImB,IAAI,EAAC,QAAQ;UACbC,IAAI,EAAC,OAAO;UACZmC,WAAW,EAAC,oCAA+B;UAC3CjC,KAAK,EAAElB,QAAQ,CAACM,KAAM;UACtB8C,QAAQ,EAAExC;QAAa;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eACFrD,OAAA;UACImB,IAAI,EAAC,MAAM;UACXC,IAAI,EAAC,OAAO;UACZoC,QAAQ,EAAExC;QAAa;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eACFrD,OAAA;UAAQmB,IAAI,EAAC,QAAQ;UAACsC,QAAQ,EAAE3C,WAAY;UAAAkC,QAAA,EAAC;QAAK;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd;AAAClD,EAAA,CA9HQF,YAAY;AAAAyD,EAAA,GAAZzD,YAAY;AAgIrB,eAAeA,YAAY;AAAC,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}